<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<body>
<div class="chartBox" style="width:1100px; height: 700px; margin-left:auto; margin-right:auto; " >
	<div class="box1" style="width: 50%; height: 100%; margin-left:auto; margin-right:auto; float:left;">
		<canvas id="tempChart"></canvas>
		<canvas id="humidityChart"></canvas>
	</div>
	<div class="box2" style="width: 50%; height: 100%; margin-left:auto; margin-right:auto; float:right;">
		<canvas id="WaterLevelChart"></canvas>
		<canvas id="humidityChart3"></canvas>
	</div>
</div>
</body>


<script th:inline="javascript">
	let monitoring=[[${monitoringData}]];
	//const labels = [ 'January', 'February', 'March', 'April', 'May', 'June', ];
	const labels = monitoring.map(v => v.monitoringTime);
	
	const temp = monitoring.map(v => v.monitoringTemperature); //온도값
	const humidity = monitoring.map(v => v.monitoringHumidity); //습도값
	
	const WaterLevel= [monitoring[0].firstWaterTankLevel,monitoring[0].secondWaterTankLevel,monitoring[0].thirdWaterTankLevel] ; //첫번째 수조높낮이 값
	const WaterLevelLabels = ["1번 수조","2번 수조","3번 수조"];
	
	
	const tempData = {
		labels : labels,
		datasets : [ {
			label : '온도변화',
			backgroundColor : 'rgb(255, 99, 132)',
			borderColor : 'rgb(255, 99, 132)',
			data : temp,
		} ]
	};
	
	const humidityData = {
			labels : labels,
			datasets : [ {
				label : '습도변화',
				backgroundColor : 'rgb(255, 99, 132)',
				borderColor : 'rgb(255, 99, 132)',
				data : humidity,
			} ]
		};
	const WaterLevelData = {
			labels : WaterLevelLabels,
			datasets : [ {
				label : '수조높이',
				backgroundColor : 'rgb(255, 99, 132)',
				borderColor : 'rgb(255, 99, 132)',
				data : WaterLevel,
			} ]
		};
	const humidityData3 = {
			labels : labels,
			datasets : [ {
				label : '조도',
				backgroundColor : 'rgb(255, 99, 132)',
				borderColor : 'rgb(255, 99, 132)',
				data : humidity,
			} ]
		};

	const TempConfig = {
		type : 'line',
		data : tempData,
		options: { 
			scales: { 
				x: {
	                grid: {
	                    display: false,
	                }
	            },
				
	            y: { // 'y'라는 id를 가진 y축에 대한 설정
	                grid: { // 가로선 설정
	                  color: '#E2E2E230',
	                },
	                
	                afterDataLimits: (scale) => {
		                  // y축의 최대값은 데이터의 최대값에 딱 맞춰져서 그려지므로
		                  // y축 위쪽 여유공간이 없어 좀 답답한 느낌이 들 수 있는데요,
		                  // 이와 같이 afterDataLimits 콜백을 사용하여 y축의 최대값을 좀 더 여유있게 지정할 수 있습니다!
		                  scale.max = scale.max * 1.005;
		                },
	                
	                ticks: {
						
						stepSize : 0.01,
						fontSize : 14,
					},
	                axis: 'y', // 이 축이 y축임을 명시해줍니다.
	                display: true, // 축의 가시성 여부도 설정할 수 있습니다.
	                position: 'left', // 축이 왼쪽에 표시될지, 오른쪽에 표시될지 정할 수 있습니다.
	                
	                title: { // 이 축의 단위 또는 이름도 title 속성을 이용하여 표시할 수 있습니다.
	                  display: true,
	                  align: 'end',
	                  color: '#808080',
	                  font: {
	                    size: 12,
	                    family: "'Noto Sans KR', sans-serif",
	                    weight: 300,
	                  },
	                  text: '단위: ℃'
	                }
	              },
			}
		}
	}
	const humidityConfig = {
			type : 'line',
			data : humidityData,
			options: { 
				scales: { 
					x: {
		                grid: {
		                    display: false,
		                }
		            },
					
		            y: { // 'y'라는 id를 가진 y축에 대한 설정
		                grid: { // 가로선 설정
		                  color: '#E2E2E230',
		                },
		                
		                afterDataLimits: (scale) => {
			                  // y축의 최대값은 데이터의 최대값에 딱 맞춰져서 그려지므로
			                  // y축 위쪽 여유공간이 없어 좀 답답한 느낌이 들 수 있는데요,
			                  // 이와 같이 afterDataLimits 콜백을 사용하여 y축의 최대값을 좀 더 여유있게 지정할 수 있습니다!
			                  scale.max = scale.max * 1.005;
			                },
		                
		                ticks: {
							
							stepSize : 0.01,
							fontSize : 14,
						},
		                axis: 'y', // 이 축이 y축임을 명시해줍니다.
		                display: true, // 축의 가시성 여부도 설정할 수 있습니다.
		                position: 'left', // 축이 왼쪽에 표시될지, 오른쪽에 표시될지 정할 수 있습니다.
		                
		                title: { // 이 축의 단위 또는 이름도 title 속성을 이용하여 표시할 수 있습니다.
		                  display: true,
		                  align: 'end',
		                  color: '#808080',
		                  font: {
		                    size: 12,
		                    family: "'Noto Sans KR', sans-serif",
		                    weight: 300,
		                  },
		                  text: '단위: %'
		                }
		              },
				}
			}
		}
	const WaterLevelConfig = {
			type : 'bar',
			data : WaterLevelData,
			options: { 
				scales: { 
					x: {
		                grid: {
		                    display: false,
		                }
		            },
					
		            y: { // 'y'라는 id를 가진 y축에 대한 설정
		                grid: { // 가로선 설정
		                  color: '#E2E2E230',
		                },
		                
		             
		                
		                ticks: {
							
							stepSize : 1,
							fontSize : 14,
						},
		                axis: 'y', // 이 축이 y축임을 명시해줍니다.
		                display: true, // 축의 가시성 여부도 설정할 수 있습니다.
		                position: 'left', // 축이 왼쪽에 표시될지, 오른쪽에 표시될지 정할 수 있습니다.
		                
		                title: { // 이 축의 단위 또는 이름도 title 속성을 이용하여 표시할 수 있습니다.
		                  display: true,
		                  align: 'end',
		                  color: '#808080',
		                  font: {
		                    size: 12,
		                    family: "'Noto Sans KR', sans-serif",
		                    weight: 300,
		                  },
		                  text: '단위: %'
		                }
		              },
				}
			}
		}
	const humidityConfig3 = {
			type : 'line',
			data : humidityData3,
			options: { 
				scales: { 
					x: {
		                grid: {
		                    display: false,
		                }
		            },
					
		            y: { // 'y'라는 id를 가진 y축에 대한 설정
		                grid: { // 가로선 설정
		                  color: '#E2E2E230',
		                },
		                
		                afterDataLimits: (scale) => {
			                  // y축의 최대값은 데이터의 최대값에 딱 맞춰져서 그려지므로
			                  // y축 위쪽 여유공간이 없어 좀 답답한 느낌이 들 수 있는데요,
			                  // 이와 같이 afterDataLimits 콜백을 사용하여 y축의 최대값을 좀 더 여유있게 지정할 수 있습니다!
			                  scale.max = scale.max * 1.005;
			                },
		                
		                ticks: {
							
							stepSize : 0.01,
							fontSize : 14,
						},
		                axis: 'y', // 이 축이 y축임을 명시해줍니다.
		                display: true, // 축의 가시성 여부도 설정할 수 있습니다.
		                position: 'left', // 축이 왼쪽에 표시될지, 오른쪽에 표시될지 정할 수 있습니다.
		                
		                title: { // 이 축의 단위 또는 이름도 title 속성을 이용하여 표시할 수 있습니다.
		                  display: true,
		                  align: 'end',
		                  color: '#808080',
		                  font: {
		                    size: 12,
		                    family: "'Noto Sans KR', sans-serif",
		                    weight: 300,
		                  },
		                  text: '단위: %'
		                }
		              },
				}
			}
		}
	const tempChart = new Chart(document.getElementById('tempChart'), TempConfig);
	const humidityChart = new Chart(document.getElementById('humidityChart'), humidityConfig);
	const WaterLevelChart= new Chart(document.getElementById('WaterLevelChart'), WaterLevelConfig);
	const humidityChart3= new Chart(document.getElementById('humidityChart3'), humidityConfig3);
</script>


</html>